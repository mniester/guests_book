<!DOCTYPE html>

<html>
	<head>
		<title>{{ title }}</title>
	</head>

	<body>
		<p><a href = "{{ url_for('index') }}"> {{ back }}</a></p>

			<div>
				{% with messages = get_flashed_messages() %}
				{% if messages %}
				<p class=flashes>
					{% for message in messages %}
					<p>{{ message }}<p>
					{% endfor %}
				<p>
				{% endif %}
				{% endwith %}
			</div>
			
			<div> {% for post in posts: %} 
				<p><a href="{{ url_for('user', name = post.user) }}">{{ post.user }}</a> o {{ post.date }} napisa≈Ç(a): </p>
				<p><a href="/post/{{ post.id }}">{{ post.get_text(cut) }}</a></p>
				{% endfor %}
			</div>

			<form action="" method="post" novalidate>
				
				{{ entry.hidden_tag() }}
					
					<div><p>
						{{ entry.nick.label }}<br>
						{{ entry.nick }}<br>
					</p></div>
						<div><p>
							{% for err1 in entry.nick.errors %}<br>
							<span style="color: red;"> {{ err1 }} </span>
							{% endfor %}
						</div></p>
					</p>
					<p>
						{{ entry.text.label }}<br>
						{{ entry.text }}
						{% for err2 in entry.text.errors %}
							<span style="color: red;"> {{ err2 }} </span>
						{% endfor %}
					</p>
				<p>{{ entry.write() }}</p>

			</form>

			<form action="" method="post" novalidate>
				
					{{ query.hidden_tag() }}
			
				<p>
					{{ query.query.label }}<br>
					{{ query.query(size=100) }}
					{% for err3 in query.query.errors %}
							<span style="color: red;"> {{ err3 }} </span>
					{% endfor %}
			
				<p>{{ query.ask() }}</p>
			</form>
		</body>
</html>
